"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[3737],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),f=r,m=d["".concat(s,".").concat(f)]||d[f]||c[f]||o;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},323:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),l=["components"],i={sidebar_label:"Edit your Universal Profile",sidebar_position:1.2},s="Edit your Universal Profile",p={unversionedId:"guides/universal-profile/edit-profile",id:"guides/universal-profile/edit-profile",isDocsHomePage:!1,title:"Edit your Universal Profile",description:"In this guide, you will learn how to customize your Universal Profile, displayed on universalprofile.cloud. You will know how to:",source:"@site/docs/guides/universal-profile/02-edit-profile.md",sourceDirName:"guides/universal-profile",slug:"/guides/universal-profile/edit-profile",permalink:"/guides/universal-profile/edit-profile",editUrl:"https://github.com/lukso-network/docs/tree/main/docs/guides/universal-profile/02-edit-profile.md",tags:[],version:"current",sidebarPosition:1.2,frontMatter:{sidebar_label:"Edit your Universal Profile",sidebar_position:1.2},sidebar:"guidesSidebar",previous:{title:"Create a Universal Profile",permalink:"/guides/universal-profile/create-profile"},next:{title:"Transfer LYX",permalink:"/guides/universal-profile/transfer-lyx"}},u=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"Setup",id:"setup",children:[],level:2},{value:"Step 1: Create a new LSP3Profile JSON file",id:"step-1-create-a-new-lsp3profile-json-file",children:[],level:2},{value:"Step 2: upload your JSON file to IPFS",id:"step-2-upload-your-json-file-to-ipfs",children:[],level:2},{value:"Step 3: encode data with erc725.js",id:"step-3-encode-data-with-erc725js",children:[],level:2},{value:"Step 4: set new data on your Universal Profile",id:"step-4-set-new-data-on-your-universal-profile",children:[],level:2},{value:"Final Code",id:"final-code",children:[],level:2}],c={toc:u};function d(e){var t=e.components,i=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"edit-your-universal-profile"},"Edit your Universal Profile"),(0,o.kt)("p",null,"In this guide, you will learn how to ",(0,o.kt)("strong",{parentName:"p"},"customize your Universal Profile"),", displayed on ",(0,o.kt)("a",{parentName:"p",href:"https://universalprofile.cloud"},"universalprofile.cloud"),". You will know how to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"add a profile + cover picture to your profile."),(0,o.kt)("li",{parentName:"ul"},"edit your profile infos (description, badges, links, etc...).")),(0,o.kt)("p",null,"To achieve this mini-project, we will perform the following steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"create a JSON file that contains your profile details (",(0,o.kt)("inlineCode",{parentName:"li"},"LSP3Profile")," metadata)."),(0,o.kt)("li",{parentName:"ol"},"upload this JSON file to IPFS, using our ",(0,o.kt)("a",{parentName:"li",href:"/tools/lsp-factoryjs/deployment/universal-profile#uploading-lsp3-metadata-to-ipfs)"},"lsp-factory.js")," tool."),(0,o.kt)("li",{parentName:"ol"},"encode + set your new ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},"LSP3Profile")," metadata key in your profile with our ",(0,o.kt)("a",{parentName:"li",href:"/tools/erc725js/writing-data#example)"},"erc725.js")," library and web3.js.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(3273).Z})),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Your profile infos (= profile metadata) are stored under the key ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},(0,o.kt)("inlineCode",{parentName:"a"},"LSP3Profile")),". This metadata takes the form of a JSON file stored on IPFS."),(0,o.kt)("p",null,"You can add (or edit) details to your UP by:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"creating a new JSON file, with new / updated infos."),(0,o.kt)("li",{parentName:"ol"},"upload this file to IPFS."),(0,o.kt)("li",{parentName:"ol"},"change the reference of your ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},"LSP3Profile")," key to point to your newly uploaded JSON file.")),(0,o.kt)("h2",{id:"setup"},"Setup"),(0,o.kt)("p",null,"We will use a new tool in this guide, ",(0,o.kt)("a",{parentName:"p",href:"/tools/erc725js/writing-data#example)"},"erc725.js"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm install @erc725/erc725.js\n")),(0,o.kt)("h2",{id:"step-1-create-a-new-lsp3profile-json-file"},"Step 1: Create a new LSP3Profile JSON file"),(0,o.kt)("p",null,"We will use the JSON template file to create your profile metadata."),(0,o.kt)("p",null,"Follow the steps below to fill the blank fields, indicated by the placeholders ",(0,o.kt)("inlineCode",{parentName:"p"},"...")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.1) add your name, description, links and tags")),(0,o.kt)("p",null,"Be as creative as you want here, to make your profile as unique as possible! \ud83c\udfa8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="YourProfileMetadata.json"',title:'"YourProfileMetadata.json"'},'{\n    "name": "...", // a self chosen username\n    "description": "..." // A description, describing the person, company, organisation or creator of the profile.\n    "links": [ // links related to the profile\n        {\n            "title": "...", // a title for the link.\n            "url": "..." // the link itself\n        }\n    ],\n    "tags": [ "Public Profile" ], // tags related to the profile\n    "profileImage": [\n        {\n            "width": Number, // in pixels\n            "height": Number, // in pixels\n            "hashFunction": "keccak256(bytes)",\n            "hash": "0x...", // bytes32 hex string of the image hash\n            "url": "ipfs://..."\n        },\n    ],\n    "backgroundImage": [\n        {\n            "width": Number, // in pixels\n            "height": Number, // in pixels\n            "hashFunction": \'keccak256(bytes)\',\n            "hash": "0x...", // bytes32 hex string of the image hash\n            "url": "ipfs://..."\n        },\n    ]\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1.2) add your profile and background image")),(0,o.kt)("p",null,"For your ",(0,o.kt)("inlineCode",{parentName:"p"},"profileImage")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"backgroundImage"),", you will need to add the following informations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"width"))," / ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"height")),": replace the placeholder ",(0,o.kt)("inlineCode",{parentName:"li"},"Number")," by the dimension of the image (in pixels)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"hash")),": use this ",(0,o.kt)("a",{parentName:"li",href:"https://emn178.github.io/online-tools/keccak_256_checksum.html"},"tool to generate the ",(0,o.kt)("strong",{parentName:"a"},"keccak256 hash")," of your image"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"url")),": upload your images to the LUKSO IPFS Gateway.")),(0,o.kt)("p",null,"Use this ",(0,o.kt)("a",{parentName:"p",href:"https://anarkrypto.github.io/upload-files-to-ipfs-from-browser-panel/public/#"},"IPFS file uploader tool")," with the settings shown below in green."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(2674).Z})),(0,o.kt)("p",null,"Drag & Drop your file and click on the ",(0,o.kt)("strong",{parentName:"p"},'"Upload')," button. Once done:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"copy the ipfs file identifier (cid) shown in green below."),(0,o.kt)("li",{parentName:"ol"},"paste it in the ",(0,o.kt)("inlineCode",{parentName:"li"},"url")," field in your JSON file, after ",(0,o.kt)("inlineCode",{parentName:"li"},"ipfs://"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(9260).Z})),(0,o.kt)("p",null,"Save your JSON file after you have added all your details and images."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NB:")," don't forget to delete the comments in the JSON file!")),(0,o.kt)("p",null,"You are now ready apply these changes on your Universal Profile. We will see how in the next section \u2b07\ufe0f"),(0,o.kt)("h2",{id:"step-2-upload-your-json-file-to-ipfs"},"Step 2: upload your JSON file to IPFS"),(0,o.kt)("p",null,"Our tool ",(0,o.kt)("a",{parentName:"p",href:"/tools/lsp-factoryjs/deployment/universal-profile#uploading-lsp3-metadata-to-ipfs)"},"lsp-factory.js")," provides convenience to upload easily your profile Metadata to IPFS."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { LSP3UniversalProfile } from '@lukso/lsp-factory.js';\n\nconst uploadResult = await LSP3UniversalProfile.uploadProfileData(jsonFile);\nconst profileMetadataIPFSUrl = uploadResult.url;\n")),(0,o.kt)("h2",{id:"step-3-encode-data-with-erc725js"},"Step 3: encode data with erc725.js"),(0,o.kt)("p",null,'The next step before to edit your Universal Profile is to prepare the data. "Prepare the data" means encoding it, so that it can be written on your Universal Profile.'),(0,o.kt)("p",null,"To do so, we will use our ",(0,o.kt)("a",{parentName:"p",href:"/tools/erc725js/writing-data#example)"},"erc725.js")," library. It will help us to encode the data easily."),(0,o.kt)("p",null,"You will need the address of your Universal Profile contract to do so. This is the address of your profile mentioned on the url after ",(0,o.kt)("inlineCode",{parentName:"p"},"/")," on ",(0,o.kt)("a",{parentName:"p",href:"https://universalprofile.cloud"},"universalprofile.cloud")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import Web3 from 'web3';\nimport { ERC725, ERC725JSONSchema } from '@erc725/erc725.js';\n\nconst web3 = new Web3('https://rpc.l14.lukso.network');\n\n// constants\nconst jsonFile = require('./YourProfileMetadata.json');\nconst profileAddress = '0x...';\n\n// 3.1 setup erc725.js\nconst schema: ERC725JSONSchema[] = [\n  {\n    name: 'LSP3Profile',\n    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',\n    keyType: 'Singleton',\n    valueContent: 'JSONURL',\n    valueType: 'bytes',\n  },\n];\n\nconst erc725 = new ERC725(schema, profileAddress, web3.currentProvider, {\n  ipfsGateway: 'https://ipfs.lukso.network/ipfs/',\n});\n\n// 3.2 encode data to be written on your UP\nconst encodedData = erc725.encodeData({\n  LSP3Profile: {\n    hashFunction: 'keccak256(utf8)',\n    // hash the retrieved file\n    hash: web3.utils.keccak256(JSON.stringify({ LSP3Profile: jsonFile })),\n    url: profileMetadataIPFSUrl,\n  },\n});\n")),(0,o.kt)("h2",{id:"step-4-set-new-data-on-your-universal-profile"},"Step 4: set new data on your Universal Profile"),(0,o.kt)("p",null,"Now that your updated data is encoded, you are ready to set it in your Universal Profile. To do so, you will interact with your Universal Profile smart contract via web3.js."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"4.1) Create instances of your contracts")),(0,o.kt)("p",null,"The first step is to create new instances of the Universal Profile and the Key Manager. You will need:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the contracts abi (from our npm package ",(0,o.kt)("inlineCode",{parentName:"li"},"@llukso/universalprofile-smart-contracts"),")."),(0,o.kt)("li",{parentName:"ul"},"the contracts addresses.")),(0,o.kt)("p",null,"You can obtain the address of your KeyManager by calling the ",(0,o.kt)("inlineCode",{parentName:"p"},"owner()")," function on your Universal Profile (if you have deployed your UP with our lsp-factory.js tool)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const UniversalProfile = require('@lukso/universalprofile-smart-contracts/artifacts/UniversalProfile.json');\nconst KeyManager = require('@lukso/universalprofile-smart-contracts/artifacts/LSP6KeyManager.json');\n\nconst myUP = new web3.eth.Contract(UniversalProfile.abi, profileAddress);\n\nconst keyManagerAddress = await myUP.methods.owner().call();\nconst myKM = new web3.eth.Contract(KeyManager.abi, keyManagerAddress);\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"4.2) set Data on your Universal Profile")),(0,o.kt)("p",null,"The final step is to edit your ",(0,o.kt)("inlineCode",{parentName:"p"},"LSP3Profile")," key on your Universal Profile with the updated value. You can easily access both the key and value from the encoded data obtained with erc725.js."),(0,o.kt)("p",null,"Since your Universal Profile is owned by your Key Manager, the call will have to go through the Key Manager first. You then need to ",(0,o.kt)("strong",{parentName:"p"},"encoded the setData payload")," and pass it to your Universal Profile to perform this last step."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// encode the setData payload\nconst abiPayload = await myUP.methods\n  .setData([encodedData.LSP3Profile.key], [encodedData.LSP3Profile.value])\n  .encodeABI();\n\n// execute via the KeyManager, passing the UP payload\nawait myKM.methods\n  .execute(abiPayload)\n  .send({ from: wallet.address, gasLimit: 3_000_000 });\n")),(0,o.kt)("h2",{id:"final-code"},"Final Code"),(0,o.kt)("p",null,"Below is the complete code snippet of this guide, with all the steps compiled together."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import Web3 from 'web3';\nimport { ERC725, ERC725JSONSchema } from '@erc725/erc725.js';\nimport { LSP3UniversalProfile } from '@lukso/lsp-factory.js';\n\nconst UniversalProfile = require('@lukso/universalprofile-smart-contracts/artifacts/UniversalProfile.json');\nconst KeyManager = require('@lukso/universalprofile-smart-contracts/artifacts/LSP6KeyManager.json');\n\n// constants\nconst profileAddress = '0x...';\n// 1. create a new LSP3Profile JSON file\nconst jsonFile = require('./YourProfileMetadata.json');\n\nconst web3 = new Web3('https://rpc.l14.lukso.network');\n\n// setup\nconst PRIVATE_KEY = '0x...';\nconst wallet = web3.eth.accounts.wallet.add(PRIVATE_KEY);\n\nasync function uploadMetadataToIPFS() {\n  const uploadResult = await LSP3UniversalProfile.uploadProfileData(jsonFile);\n  return uploadResult.url;\n}\n\nfunction setUpERC725JS() {\n  const schema: ERC725JSONSchema[] = [\n    {\n      name: 'LSP3Profile',\n      key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',\n      keyType: 'Singleton',\n      valueContent: 'JSONURL',\n      valueType: 'bytes',\n    },\n  ];\n\n  return new ERC725(schema, profileAddress, web3.currentProvider, {\n    ipfsGateway: 'https://ipfs.lukso.network/ipfs/',\n  });\n}\n\nasync function createContractsInstance() {\n  const myUP = new web3.eth.Contract(UniversalProfile.abi, profileAddress);\n\n  const keyManagerAddress = await myUP.methods.owner().call();\n  const myKM = new web3.eth.Contract(KeyManager.abi, keyManagerAddress);\n\n  return { myUP, myKM };\n}\n\n// Final code\nasync function editProfileInfos() {\n  // 2. upload the JSON files to IPFS\n  const lsp3ProfileIPFSUrl = await uploadMetadataToIPFS();\n\n  // 3.1 setup erc725.js\n  const erc725 = setUpERC725JS();\n  // 3.2 encode data to be written on your UP\n  const encodedData = erc725.encodeData({\n    LSP3Profile: {\n      hashFunction: 'keccak256(utf8)',\n      // hash the retrieved file\n      hash: web3.utils.keccak256(JSON.stringify({ LSP3Profile: jsonFile })),\n      url: lsp3ProfileIPFSUrl,\n    },\n  });\n\n  // 4. set new data on your Universal Profile\n  // 4.1 create instances of your contracts\n  const { myUP, myKM } = await createContractsInstance();\n\n  // 4.2 encode the setData payload\n  const abiPayload = await myUP.methods\n    .setData([encodedData.LSP3Profile.key], [encodedData.LSP3Profile.value])\n    .encodeABI();\n\n  // 4.3 execute via the KeyManager, passing the UP payload\n  await myKM.methods\n    .execute(abiPayload)\n    .send({ from: wallet.address, gasLimit: 3_000_000 });\n}\neditProfileInfos();\n")))}d.isMDXComponent=!0},3273:function(e,t,n){t.Z=n.p+"assets/images/edit-profile-c309924d85c9cf7faf967f188ff285a3.png"},9260:function(e,t,n){t.Z=n.p+"assets/images/ipfs-file-upload-0e460f4d156422c28a7358d3225ecacc.jpg"},2674:function(e,t,n){t.Z=n.p+"assets/images/ipfs-lukso-settings-f05fdffe93eb5341def5749ce919c6ff.jpg"}}]);